"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[376],{376:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r,a,i,c,o=t(861),u=t(439),s=t(757),d=t.n(s),l=t(791),p=t(168),f=t(444),h=f.ZP.form(r||(r=(0,p.Z)(["\n  background-color: #b1cede;\n  max-width: 450px;\n  border-radius: 10px;\n  text-align: center;\n  padding: 25px;\n"]))),x=t(984),m=t(465),b=t(255),j=(0,m.LC)({reducerPath:"contacts",baseQuery:(0,b.ni)({baseUrl:"https://63b283da5e490925c51a9189.mockapi.io"}),endpoints:function(e){return{getContacts:e.query({query:function(){return"/contacts"},providesTags:["Contacts"]}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:e}},invalidatesTags:["Contacts"]}),deleteContact:e.mutation({query:function(e){return{url:"contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contacts"]})}}}),v=j.useGetContactsQuery,y=j.useAddContactMutation,g=j.useDeleteContactMutation,C=t(184),w=function(){var e=(0,l.useState)(""),n=(0,u.Z)(e,2),t=n[0],r=n[1],a=(0,l.useState)(""),i=(0,u.Z)(a,2),c=i[0],s=i[1],p=v().data,f=y(),m=(0,u.Z)(f,1)[0],b=function(){var e=(0,o.Z)(d().mark((function e(n,t){var r,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){return p.find((function(n){return n.name.toLocaleLowerCase()===e.toLocaleLowerCase()}))},a=function(){return p.find((function(e){return e.number===t}))},i={id:(0,x.x0)(10),name:n,number:t},!r(i.name)){e.next=5;break}return e.abrupt("return",alert("".concat(i.name," is already in contacts")));case 5:if(!a(i.number)){e.next=7;break}return e.abrupt("return",alert("".concat(i.number," is already in contacts")));case 7:return e.prev=7,e.next=10,m(i);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),window.alert("Oh no, error...");case 15:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(n,t){return e.apply(this,arguments)}}(),j=function(e){var n=e.target;"text"===n.type&&r(n.value),"tel"===n.type&&s(n.value)};return(0,C.jsxs)(h,{onSubmit:function(e){e.preventDefault(),b(t,c),r(""),s("")},autoComplete:"off",children:[(0,C.jsxs)("label",{children:[(0,C.jsx)("p",{children:"Name"}),(0,C.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",required:!0,value:t,onChange:j})]}),(0,C.jsxs)("label",{children:[(0,C.jsx)("p",{children:"Number"}),(0,C.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",required:!0,value:c,onChange:j})]}),(0,C.jsx)("br",{}),(0,C.jsx)("button",{type:"submit",children:"Add contact"})]})},Z=f.ZP.ul(a||(a=(0,p.Z)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  width: 500px;\n  background-color: #ffd1e0;\n  border-radius: 10px;\n  padding: 25px;\n"]))),k=f.ZP.li(i||(i=(0,p.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 10px;\n  width: 100%;\n  text-align: start;\n"]))),L=f.ZP.button(c||(c=(0,p.Z)([""]))),P=t(48),q=(0,t(273).oM)({name:"filter",initialState:{filter:""},reducers:{setFilter:function(e,n){e.filter=n.payload}}}),S=(q.reducer,q.actions.setFilter),T=function(e){return e.filter.filter},A=function(){var e=g(),n=(0,u.Z)(e,1)[0],t=v().data,r=(0,P.v9)(T),a=function(e){n(e.currentTarget.id)};return(0,C.jsx)(Z,{children:t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})).map((function(e){return(0,C.jsxs)(k,{children:[(0,C.jsx)("span",{children:e.name}),(0,C.jsx)("span",{children:e.number}),(0,C.jsx)(L,{id:e.id,onClick:a,children:"Delete"})]},e.id)}))})},F=function(){var e=(0,P.I0)(),n=(0,P.v9)(T);return(0,C.jsxs)("label",{children:[(0,C.jsx)("p",{children:"Find contacts by name"}),(0,C.jsx)("input",{type:"text",value:n,onChange:function(n){e(S(n.target.value))}})]})},D=function(){var e=v(),n=e.data,t=e.error,r=e.isLoading;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("h1",{children:"Phonebook"}),(0,C.jsx)(w,{}),(0,C.jsx)("h2",{children:"Contacts"}),r||0===n.length?(0,C.jsx)("div",{children:"Your contacts are not here yet, but you can add contacts in the form above and save them in this app"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(F,{}),(0,C.jsx)(A,{})]}),t&&(0,C.jsx)("div",{children:"Oh no... Something wrong"})]})}}}]);
//# sourceMappingURL=376.cce94bc1.chunk.js.map
(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[626],{626:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r,a,i,u,o=t(861),c=t(439),s=t(757),l=t.n(s),d=t(791),p=t(168),f=t(444),x=f.ZP.form(r||(r=(0,p.Z)(["\n  background-color: #b1cede;\n  max-width: 450px;\n  border-radius: 10px;\n  text-align: center;\n  padding: 25px;\n"]))),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,n){return e+=(n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n>62?"-":"_"}),"")},m=t(73),b=t(184),j=function(){var e=(0,d.useState)(""),n=(0,c.Z)(e,2),t=n[0],r=n[1],a=(0,d.useState)(""),i=(0,c.Z)(a,2),u=i[0],s=i[1],p=(0,m.useGetContactsQuery)().data,f=(0,m.useAddContactMutation)(),j=(0,c.Z)(f,1)[0],v=function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){return p.find((function(n){return n.name.toLocaleLowerCase()===e.toLocaleLowerCase()}))},a=function(){return p.find((function(e){return e.number===t}))},i={id:h(10),name:n,number:t},!r(i.name)){e.next=5;break}return e.abrupt("return",alert("".concat(i.name," is already in contacts")));case 5:if(!a(i.number)){e.next=7;break}return e.abrupt("return",alert("".concat(i.number," is already in contacts")));case 7:return e.prev=7,e.next=10,j(i);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),window.alert("Oh no, error...");case 15:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(n,t){return e.apply(this,arguments)}}(),g=function(e){var n=e.target;"text"===n.type&&r(n.value),"tel"===n.type&&s(n.value)};return(0,b.jsxs)(x,{onSubmit:function(e){e.preventDefault(),v(t,u),r(""),s("")},autoComplete:"off",children:[(0,b.jsxs)("label",{children:[(0,b.jsx)("p",{children:"Name"}),(0,b.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",required:!0,value:t,onChange:g})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("p",{children:"Number"}),(0,b.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",required:!0,value:u,onChange:g})]}),(0,b.jsx)("br",{}),(0,b.jsx)("button",{type:"submit",children:"Add contact"})]})},v=f.ZP.ul(a||(a=(0,p.Z)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  width: 500px;\n  background-color: #ffd1e0;\n  border-radius: 10px;\n  padding: 25px;\n"]))),g=f.ZP.li(i||(i=(0,p.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 10px;\n  width: 100%;\n  text-align: start;\n"]))),y=f.ZP.button(u||(u=(0,p.Z)([""]))),w=t(434),C=(0,t(382).oM)({name:"filter",initialState:{filter:""},reducers:{setFilter:function(e,n){e.filter=n.payload}}}),Z=(C.reducer,C.actions.setFilter),k=function(e){return e.filter.filter},L=function(){var e=(0,m.useDeleteContactMutation)(),n=(0,c.Z)(e,1)[0],t=(0,m.useGetContactsQuery)().data,r=(0,w.v9)(k),a=function(e){n(e.currentTarget.id)};return(0,b.jsx)(v,{children:t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})).map((function(e){return(0,b.jsxs)(g,{children:[(0,b.jsx)("span",{children:e.name}),(0,b.jsx)("span",{children:e.number}),(0,b.jsx)(y,{id:e.id,onClick:a,children:"Delete"})]},e.id)}))})},S=function(){var e=(0,w.I0)(),n=(0,w.v9)(k);return(0,b.jsxs)("label",{children:[(0,b.jsx)("p",{children:"Find contacts by name"}),(0,b.jsx)("input",{type:"text",value:n,onChange:function(n){e(Z(n.target.value))}})]})},A=function(){var e=(0,m.useGetContactsQuery)(),n=e.data,t=e.error,r=e.isLoading;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h1",{children:"Phonebook"}),(0,b.jsx)(j,{}),(0,b.jsx)("h2",{children:"Contacts"}),r||0===n.length?(0,b.jsx)("div",{children:"Your contacts are not here yet, but you can add contacts in the form above and save them in this app"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S,{}),(0,b.jsx)(L,{})]}),t&&(0,b.jsx)("div",{children:"Oh no... Something wrong"})]})}},73:function(){}}]);
//# sourceMappingURL=626.1d3c2479.chunk.js.map